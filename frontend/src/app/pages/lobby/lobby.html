<div class="lobby-container">
    <h1>Scacchi Distribuiti - Lobby</h1>

    <div class="actions">
        <button class="btn-primary" (click)="openCreateModal()">+ Crea Nuova Partita</button>
    </div>

    <div class="content">
        <section class="panel">
            <h2>Partite Disponibili</h2>
            @if (games().length === 0) {
            <p>Nessuna partita attiva.</p>
            }
            <ul class="game-list">
                @for (g of games(); track g.gameId) {
                <li>
                    <span>{{ g.gameName }}</span>
                    <button (click)="joinGame(g.gameId)">Entra</button>
                </li>
                }
            </ul>
        </section>

        <section class="panel players-panel">
            <h2>Giocatori Online ({{ players().length }})</h2>
            <ul>
                @for (p of players(); track p.playerId) {
                <li>{{ p.playerName }}</li>
                }
            </ul>
        </section>
    </div>
</div>

<!-- MODALE DI CREAZIONE -->
@if (isModalOpen()) {
<div class="modal-overlay" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <h2>Configura Partita</h2>

        <div class="form-group">
            <label>Nome Stanza</label>
            <input type="text" [(ngModel)]="newGameName">
        </div>

        <div class="form-group">
            <label>Giocatori per Squadra</label>
            <input type="number" min="1" max="4" [(ngModel)]="teamSize">
            <small>
                @if (teamSize === 1) { Modalità: 1 vs 1 (Classica) }
                @else { Modalità: {{ teamSize }} vs {{ teamSize }} (Voto di Squadra) }
            </small>
        </div>

        <div class="modal-actions">
            <button (click)="closeModal()" class="btn-secondary">Annulla</button>
            <button (click)="confirmCreate()" class="btn-primary">Crea</button>
        </div>
    </div>
</div>
}