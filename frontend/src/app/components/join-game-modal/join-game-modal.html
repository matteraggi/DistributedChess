<div class="modal-overlay" (click)="onOverlayClick()">
    <div class="modal-content glass-panel" (click)="$event.stopPropagation()">
        <h2 class="modal-title">Unisciti alla Battaglia</h2>

        <div class="join-list-container">
            @if (noGames()) {
            <div class="empty-state">
                <p>Nessuna partita attiva al momento.</p>
            </div>
            } @else {
            <ul class="game-list">
                @for (g of games; track g.gameId) {
                @if (g.players && hasOpenSlot(g)) {
                <li>
                    <span class="game-name">
                        {{ g.gameName }}
                        <small>({{ g.players.length }}/{{ g.capacity }})</small>
                    </span>
                    <button class="btn-small-join" (click)="joinGame(g.gameId, g.gameName)">Entra</button>
                </li>
                }
                }
            </ul>
            }
        </div>

        <div class="modal-actions">
            <button (click)="close.emit()" class="btn-secondary">Chiudi</button>
        </div>
    </div>
</div>